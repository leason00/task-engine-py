CREATE TABLE `task_queue` (
  `id` INT UNSIGNED AUTO_INCREMENT NOT NULL COMMENT '主键',
  `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `updated_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `task_key` VARCHAR(100) NOT NULL COMMENT '任务名',
  `step_name` VARCHAR(100) NOT NULL COMMENT '步骤名称',
  `status` VARCHAR(100) NOT NULL COMMENT '状态',
  `params` VARCHAR(2000) NOT NULL COMMENT '参数',
  `is_deleted` TINYINT NOT NULL DEFAULT '0' COMMENT '逻辑删除状态，未删除0，已删除1',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB CHARSET=utf8mb4 COMMENT='任务队列表';


CREATE TABLE `task_step_meta` (
  `id` INT UNSIGNED AUTO_INCREMENT NOT NULL COMMENT '主键',
  `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `updated_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `task_key` VARCHAR(100) NOT NULL COMMENT '任务名',
  `step_name` VARCHAR(100) NOT NULL COMMENT '步骤名称',
  `index` INT NOT NULL COMMENT '顺序',
  `is_deleted` TINYINT NOT NULL DEFAULT '0' COMMENT '逻辑删除状态，未删除0，已删除1',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB CHARSET=utf8mb4 COMMENT='任务元信息表';





CREATE TABLE `task_step_info` (
  `id` INT UNSIGNED AUTO_INCREMENT NOT NULL COMMENT '主键',
  `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `updated_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `task_key` VARCHAR(100) NOT NULL COMMENT '任务名',
  `step_name` VARCHAR(100) NOT NULL COMMENT '步骤名称',
  `context` VARCHAR(2048) NOT NULL COMMENT '步骤执行上线文',
  `exec_log` TEXT NOT NULL COMMENT '步骤执行日志',
  `task_queue_id` INT NOT NULL COMMENT '任务队列的id',
  `status` VARCHAR(100) NOT NULL COMMENT '状态',
  `is_deleted` TINYINT NOT NULL DEFAULT '0' COMMENT '逻辑删除状态，未删除0，已删除1',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB CHARSET=utf8mb4 COMMENT='任务实例化信息表';